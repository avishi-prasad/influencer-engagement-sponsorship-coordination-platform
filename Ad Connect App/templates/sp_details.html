<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <title>AdConnect</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <span class="navbar-brand"> <i class="fas fa-network-wired"> AdConnect</i></span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/sponsor/{{username}}/messages">Messages </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/sponsor/{{username}}/add_campaign">Campaigns</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/sponsor/{{username}}/search">Search </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/sponsor/{{username}}/profile">| {{username}} <i class="fas fa-user-alt"></i> Profile</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="sidebar">
        <br>
        <br>
        <br>
        <a href="/" class="logout-link">Logout</a>
    </div>
    
    <div id="app" data-username="{{ username }}" data-influencer_id="{{ inf_id }}" data-influencer_name="{{ inf_name }}" data-campaigns="{{ campaigns|tojson }}">
        <div class="content">
            {% if INF %}
            <div>
            
            <div style="text-align: center;">
                <img src="/static/profilepic.png" style="max-height: 5cm;">
            </div>
            {% if influencer %}
            <div style="text-align: center; background-color: #add3f5;">
                <p><strong>USERNAME: </strong><span style="font-size: larger;"> {{influencer.user_name}}{% if influencer.approved=="approved" %}âœ…{% elif influencer.approved=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</span></p>
                <p><strong>RATING: </strong><span style="font-size: larger;"> {{influencer.rating}}{% if influencer.rating %}<span style="color:#FFD700; font-size: larger; ">â˜…</span>{% endif %}</span></p>
                <p><strong>FOLLOWERS: </strong><span style="font-size: larger;"> {{followers}}</span></p>
                <p><strong>DESCRIPTION: </strong><span style="font-size: larger;"> {{influencer.description}}</span><br>
                <button @click="showModal = true;" style="background-color:#FFD700;">Send request</button>
                <send-req v-if="showModal" @close="showModal = false" @submit="sendRequest" :username="'{{username}}'" :influencer_id="'{{influencer.user_id}}'" :influencer_name="'{{influencer.user_name}}'" :campaigns="{{campaigns}}"></send-req>
                <button @click="showModal2 = true;" style="background-color:#FF7F50;">Rate</button>
                <rate v-if="showModal2" @close="showModal = false" @submit="sendRating" :username="'{{username}}'" :influencer_id="'{{influencer.user_id}}'" :influencer_name="'{{influencer.user_name}}'" ></rate>
                </div>
            {% endif %}<br>

            <h4>Currently Part of Campaigns:</h4>
            {% if current_camp|length >0 %}
            {% for x in current_camp %}
            <div class="box">
                <span>CAMPAIGN NAME: <b>{{ x["campaign_name"] }}{% if x["approved"]=="approved" %}âœ…{% elif x["approved"]=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b>
                    <br>sponsor : <b>{{ x["sponsor_name"] }}{% if x["sp_approved"]=="approved" %}âœ…{% elif x["sp_approved"]=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b>
                </span>
        </div>{% endfor %}
            {% else %}
                <p>Not a part of any campaign currently.</p>
            {% endif %}

            <h4>Completed Campaigns:</h4>
            {% if completed_camp|length>0 %}
            {% for x in completed_camp %}
            <div class="box">
                <span>CAMPAIGN NAME: <b>{{ x["campaign_name"] }}{% if x["approved"]=="approved" %}âœ…{% elif x["approved"]=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b>
                    <br>sponsor : <b>{{ x["sponsor_name"] }}{% if x["sp_approved"]=="approved" %}âœ…{% elif x["sp_approved"]=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b>
                </span>
        </div>{% endfor %}
            {% else %}
                <p>No campaigns completed yet.</p>
            {% endif %}
            </div>
            {% endif %}

            {% if CAMP %}
            <h4>CAMPAIGN DETAILS:</h4><br><br>
            {% if camp %}
            <div>
            <span> CAMPAIGN NAME: <b>{{ camp.name }}{% if camp.approved=="approved" %}âœ…{% elif camp.approved=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b><br>
                <br> sponsor : <b>{{ camp.sponsor_id }}{% if camp.sp_approved=="approved" %}âœ…{% elif camp.sp_approved=="flagged" %}ðŸš© {% else %}ðŸ”µ{% endif %}</b><br>
                <br> BUDGET: Rs.<b>{{camp.budget}}</b><br>
                <br>DESCRIPTION: <b>{{camp.description}}</b><br>
                <br>DATE STARTED: <b>{{camp.start_date}}</b><br>
                <br>END DATE: <b>{{camp.end_date}}</b><br>
                <br>No. of influencers that are a part of this campaign: {{infs}}
            </span>
            </div><br><br>
            
            {% endif %}
            {% endif %}
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/static/vue.js"></script> 
</body>
</html>
 